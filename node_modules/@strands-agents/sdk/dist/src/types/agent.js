import { ToolStreamEvent } from '../tools/tool.js';
/**
 * Result returned by the agent loop.
 */
export class AgentResult {
    type = 'agentResult';
    /**
     * The stop reason from the final model response.
     */
    stopReason;
    /**
     * The last message added to the messages array.
     */
    lastMessage;
    constructor(data) {
        this.stopReason = data.stopReason;
        this.lastMessage = data.lastMessage;
    }
    /**
     * Extracts and concatenates all text content from the last message.
     * Includes text from TextBlock and ReasoningBlock content blocks.
     *
     * @returns The agent's last message as a string, with multiple blocks joined by newlines.
     */
    toString() {
        const textParts = [];
        for (const block of this.lastMessage.content) {
            switch (block.type) {
                case 'textBlock':
                    textParts.push(block.text);
                    break;
                case 'reasoningBlock':
                    if (block.text) {
                        // Add indentation to reasoning content
                        const indentedText = block.text.replace(/\n/g, '\n   ');
                        textParts.push(`ðŸ’­ Reasoning:\n   ${indentedText}`);
                    }
                    break;
                default:
                    console.debug(`Skipping content block type: ${block.type}`);
                    break;
            }
        }
        return textParts.join('\n');
    }
}
//# sourceMappingURL=agent.js.map