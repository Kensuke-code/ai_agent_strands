import { type ContentBlock, Message, type SystemPrompt } from '../types/messages.js';
import type { ToolChoice, ToolSpec } from '../tools/types.js';
import { ModelMetadataEvent, type ModelStreamEvent } from './streaming.js';
/**
 * Base configuration interface for all model providers.
 *
 * This interface defines the common configuration properties that all
 * model providers should support. Provider-specific configurations
 * should extend this interface.
 */
export interface BaseModelConfig {
    /**
     * The model identifier.
     * This typically specifies which model to use from the provider's catalog.
     */
    modelId?: string;
    /**
     * Maximum number of tokens to generate in the response.
     *
     * @see Provider-specific documentation for exact behavior
     */
    maxTokens?: number;
    /**
     * Controls randomness in generation.
     *
     * @see Provider-specific documentation for valid range
     */
    temperature?: number;
    /**
     * Controls diversity via nucleus sampling.
     *
     * @see Provider-specific documentation for details
     */
    topP?: number;
}
/**
 * Options interface for configuring streaming model invocation.
 */
export interface StreamOptions {
    /**
     * System prompt to guide the model's behavior.
     * Can be a simple string or an array of content blocks for advanced caching.
     */
    systemPrompt?: SystemPrompt;
    /**
     * Array of tool specifications that the model can use.
     */
    toolSpecs?: ToolSpec[];
    /**
     * Controls how the model selects tools to use.
     */
    toolChoice?: ToolChoice;
}
/**
 * Result interface for the streamAggregated method.
 * Contains the complete message, stop reason, and optional metadata.
 */
export interface StreamAggregatedResult {
    /**
     * The complete message from the model.
     */
    message: Message;
    /**
     * The reason why the model stopped generating.
     */
    stopReason: string;
    /**
     * Optional metadata about the model invocation, including usage statistics and metrics.
     */
    metadata?: ModelMetadataEvent;
}
/**
 * Base abstract class for model providers.
 * Defines the contract that all model provider implementations must follow.
 *
 * Model providers handle communication with LLM APIs and implement streaming
 * responses using async iterables.
 *
 * @typeParam T - Model configuration type extending BaseModelConfig
 */
export declare abstract class Model<T extends BaseModelConfig = BaseModelConfig> {
    /**
     * Updates the model configuration.
     * Merges the provided configuration with existing settings.
     *
     * @param modelConfig - Configuration object with model-specific settings to update
     */
    abstract updateConfig(modelConfig: T): void;
    /**
     * Retrieves the current model configuration.
     *
     * @returns The current configuration object
     */
    abstract getConfig(): T;
    /**
     * Streams a conversation with the model.
     * Returns an async iterable that yields streaming events as they occur.
     *
     * @param messages - Array of conversation messages
     * @param options - Optional streaming configuration
     * @returns Async iterable of streaming events
     */
    abstract stream(messages: Message[], options?: StreamOptions): AsyncIterable<ModelStreamEvent>;
    /**
     * Converts event data to event class representation
     *
     * @param event_data - Interface representation of event
     * @returns Class representation of event
     */
    private _convert_to_class_event;
    /**
     * Streams a conversation with aggregated content blocks and messages.
     * Returns an async generator that yields streaming events and content blocks, and returns the final message with stop reason and optional metadata.
     *
     * This method enhances the basic stream() by collecting streaming events into complete
     * ContentBlock and Message objects, which are needed by the agentic loop for tool execution
     * and conversation management.
     *
     * The method yields:
     * - ModelStreamEvent - Original streaming events (passed through)
     * - ContentBlock - Complete content block (emitted when block completes)
     *
     * The method returns:
     * - StreamAggregatedResult containing the complete message, stop reason, and optional metadata
     *
     * @param messages - Array of conversation messages
     * @param options - Optional streaming configuration
     * @returns Async generator yielding ModelStreamEvent | ContentBlock and returning a StreamAggregatedResult
     */
    streamAggregated(messages: Message[], options?: StreamOptions): AsyncGenerator<ModelStreamEvent | ContentBlock, StreamAggregatedResult, undefined>;
}
//# sourceMappingURL=model.d.ts.map